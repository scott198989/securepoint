// 2024 Military Pay Tables
// Source: Defense Finance and Accounting Service (DFAS)
// Note: These are base pay rates. Actual pay may vary.

import { PayGrade } from '../../types';

// Monthly base pay by pay grade and years of service (YOS)
// Format: { payGrade: { yos: monthlyPay } }
export const BASE_PAY_TABLE_2024: Record<PayGrade, Record<number, number>> = {
  // Enlisted
  'E-1': {
    0: 1917.60, 2: 1917.60, 3: 1917.60, 4: 1917.60, 6: 1917.60,
    8: 1917.60, 10: 1917.60, 12: 1917.60, 14: 1917.60, 16: 1917.60,
    18: 1917.60, 20: 1917.60, 22: 1917.60, 24: 1917.60, 26: 1917.60,
  },
  'E-2': {
    0: 2149.20, 2: 2149.20, 3: 2149.20, 4: 2149.20, 6: 2149.20,
    8: 2149.20, 10: 2149.20, 12: 2149.20, 14: 2149.20, 16: 2149.20,
    18: 2149.20, 20: 2149.20, 22: 2149.20, 24: 2149.20, 26: 2149.20,
  },
  'E-3': {
    0: 2259.90, 2: 2402.10, 3: 2545.50, 4: 2545.50, 6: 2545.50,
    8: 2545.50, 10: 2545.50, 12: 2545.50, 14: 2545.50, 16: 2545.50,
    18: 2545.50, 20: 2545.50, 22: 2545.50, 24: 2545.50, 26: 2545.50,
  },
  'E-4': {
    0: 2503.50, 2: 2633.10, 3: 2775.30, 4: 2914.50, 6: 3036.00,
    8: 3036.00, 10: 3036.00, 12: 3036.00, 14: 3036.00, 16: 3036.00,
    18: 3036.00, 20: 3036.00, 22: 3036.00, 24: 3036.00, 26: 3036.00,
  },
  'E-5': {
    0: 2730.30, 2: 2914.20, 3: 3054.30, 4: 3196.80, 6: 3419.10,
    8: 3632.40, 10: 3815.70, 12: 3893.40, 14: 3893.40, 16: 3893.40,
    18: 3893.40, 20: 3893.40, 22: 3893.40, 24: 3893.40, 26: 3893.40,
  },
  'E-6': {
    0: 2980.50, 2: 3280.20, 3: 3422.70, 4: 3562.20, 6: 3706.50,
    8: 4041.30, 10: 4175.40, 12: 4381.80, 14: 4510.50, 16: 4623.30,
    18: 4671.60, 20: 4671.60, 22: 4671.60, 24: 4671.60, 26: 4671.60,
  },
  'E-7': {
    0: 3445.80, 2: 3761.40, 3: 3907.50, 4: 4095.00, 6: 4247.70,
    8: 4497.90, 10: 4636.50, 12: 4880.70, 14: 5062.80, 16: 5204.70,
    18: 5333.70, 20: 5387.70, 22: 5554.20, 24: 5691.30, 26: 5816.40,
  },
  'E-8': {
    0: 4957.20, 2: 5123.70, 3: 5261.70, 4: 5408.40, 6: 5576.40,
    8: 5824.80, 10: 5976.60, 12: 6218.10, 14: 6411.90, 16: 6680.10,
    18: 6852.60, 20: 7006.50, 22: 7180.80, 24: 7354.20, 26: 7550.70,
  },
  'E-9': {
    0: 6055.50, 2: 6192.60, 3: 6372.30, 4: 6556.50, 6: 6755.10,
    8: 7056.00, 10: 7258.80, 12: 7563.90, 14: 7868.70, 16: 8186.10,
    18: 8498.40, 20: 8800.80, 22: 9103.20, 24: 9424.50, 26: 9767.10,
  },
  // Warrant Officers
  'W-1': {
    0: 3614.70, 2: 4003.50, 3: 4105.80, 4: 4318.80, 6: 4549.50,
    8: 4882.80, 10: 5063.70, 12: 5363.10, 14: 5583.00, 16: 5796.90,
    18: 5987.70, 20: 6178.20, 22: 6178.20, 24: 6178.20, 26: 6178.20,
  },
  'W-2': {
    0: 4129.80, 2: 4518.90, 3: 4638.00, 4: 4708.20, 6: 4935.30,
    8: 5287.80, 10: 5493.00, 12: 5692.80, 14: 5864.70, 16: 6033.60,
    18: 6297.00, 20: 6556.20, 22: 6718.50, 24: 6718.50, 26: 6718.50,
  },
  'W-3': {
    0: 4674.60, 2: 4867.50, 3: 5066.40, 4: 5128.50, 6: 5342.70,
    8: 5747.40, 10: 6110.10, 12: 6330.60, 14: 6555.60, 16: 6802.20,
    18: 7039.50, 20: 7276.50, 22: 7504.80, 24: 7643.40, 26: 7643.40,
  },
  'W-4': {
    0: 5115.90, 2: 5502.30, 3: 5661.90, 4: 5820.00, 6: 6090.00,
    8: 6356.70, 10: 6626.70, 12: 6979.50, 14: 7326.00, 16: 7675.50,
    18: 7941.90, 20: 8203.80, 22: 8465.70, 24: 8727.60, 26: 8989.20,
  },
  'W-5': {
    0: 7288.20, 2: 7616.10, 3: 7819.50, 4: 7922.70, 6: 8132.10,
    8: 8543.70, 10: 8957.70, 12: 9277.80, 14: 9632.40, 16: 9958.80,
    18: 10261.50, 20: 10564.50, 22: 10992.30, 24: 10992.30, 26: 10992.30,
  },
  // Officers
  'O-1': {
    0: 3637.20, 2: 3789.90, 3: 4583.40, 4: 4583.40, 6: 4583.40,
    8: 4583.40, 10: 4583.40, 12: 4583.40, 14: 4583.40, 16: 4583.40,
    18: 4583.40, 20: 4583.40, 22: 4583.40, 24: 4583.40, 26: 4583.40,
  },
  'O-2': {
    0: 4190.40, 2: 4770.60, 3: 5494.20, 4: 5681.10, 6: 5799.60,
    8: 5799.60, 10: 5799.60, 12: 5799.60, 14: 5799.60, 16: 5799.60,
    18: 5799.60, 20: 5799.60, 22: 5799.60, 24: 5799.60, 26: 5799.60,
  },
  'O-3': {
    0: 4849.80, 2: 5497.80, 3: 5935.50, 4: 6471.60, 6: 6785.70,
    8: 7126.80, 10: 7405.20, 12: 7776.60, 14: 7998.90, 16: 7998.90,
    18: 7998.90, 20: 7998.90, 22: 7998.90, 24: 7998.90, 26: 7998.90,
  },
  'O-4': {
    0: 5532.00, 2: 6402.00, 3: 6829.80, 4: 6921.90, 6: 7318.80,
    8: 7752.30, 10: 8280.30, 12: 8680.50, 14: 8990.40, 16: 9225.60,
    18: 9405.30, 20: 9405.30, 22: 9405.30, 24: 9405.30, 26: 9405.30,
  },
  'O-5': {
    0: 6417.30, 2: 7229.10, 3: 7731.60, 4: 7821.60, 6: 8131.50,
    8: 8454.60, 10: 8929.80, 12: 9255.30, 14: 9710.40, 16: 10029.60,
    18: 10342.50, 20: 10585.50, 22: 10828.80, 24: 10828.80, 26: 10828.80,
  },
  'O-6': {
    0: 7695.00, 2: 8458.50, 3: 9012.30, 4: 9012.30, 6: 9051.30,
    8: 9412.80, 10: 9436.50, 12: 9436.50, 14: 9970.50, 16: 10975.80,
    18: 11531.70, 20: 11952.00, 22: 12372.60, 24: 12908.10, 26: 13443.60,
  },
  'O-7': {
    0: 10147.80, 2: 10621.50, 3: 10837.80, 4: 11009.40, 6: 11322.90,
    8: 11638.50, 10: 11999.70, 12: 12360.90, 14: 12721.80, 16: 13566.60,
    18: 14208.00, 20: 14208.00, 22: 14208.00, 24: 14208.00, 26: 14208.00,
  },
  'O-8': {
    0: 12236.10, 2: 12630.30, 3: 12892.50, 4: 12967.80, 6: 13293.90,
    8: 13806.00, 10: 13931.70, 12: 14432.70, 14: 14598.90, 16: 15306.60,
    18: 15818.70, 20: 16330.50, 22: 16636.50, 24: 16636.50, 26: 16636.50,
  },
  'O-9': {
    0: 14880.00, 2: 15236.70, 3: 15544.80, 4: 15733.20, 6: 15925.80,
    8: 16330.50, 10: 16839.30, 12: 17346.00, 14: 17704.20, 16: 18316.80,
    18: 19139.40, 20: 19657.80, 22: 19657.80, 24: 19657.80, 26: 19657.80,
  },
  'O-10': {
    0: 17675.10, 2: 17675.10, 3: 17675.10, 4: 17675.10, 6: 17791.50,
    8: 18416.70, 10: 18529.50, 12: 19139.40, 14: 19749.30, 16: 20652.90,
    18: 21556.80, 20: 22459.80, 22: 22459.80, 24: 22459.80, 26: 22459.80,
  },
};

// BAS (Basic Allowance for Subsistence) rates - 2024
export const BAS_RATES_2024 = {
  enlisted: 452.56,
  officer: 311.68,
};

// Special and Incentive Pay rates (monthly unless noted)
export const SPECIAL_PAY_RATES = {
  hostileFirePay: 225,
  imminentDangerPay: 225,
  familySeparationAllowance: 250,
  hardshipDutyPay: {
    level1: 50,
    level2: 100,
    level3: 150,
  },
  seaPay: {
    E1_E3_under2yrs: 60,
    E1_E3_2to3yrs: 80,
    E4_under2yrs: 80,
    E4_2to3yrs: 100,
    E5_E6_under2yrs: 100,
    E5_E6_2to3yrs: 150,
    // ... more tiers exist
  },
  flightPay: {
    enlisted: 150, // Base rate, varies by skill level
    officer_O1_O2: 125,
    officer_O3_O4: 156,
    officer_O5_O6: 206,
    // Aviation Career Incentive Pay ranges higher
  },
  jumpPay: 150, // Parachutist badge holders
  divePay: {
    basic: 150,
    specialist: 275,
    supervisor: 340,
  },
};

// Get base pay for a specific rank and years of service
export function getBasePay(payGrade: PayGrade, yearsOfService: number): number {
  const yosTable = BASE_PAY_TABLE_2024[payGrade];
  if (!yosTable) return 0;

  // Find the highest YOS bracket that's <= actual years
  const brackets = Object.keys(yosTable)
    .map(Number)
    .sort((a, b) => a - b);

  let applicableBracket = 0;
  for (const bracket of brackets) {
    if (bracket <= yearsOfService) {
      applicableBracket = bracket;
    } else {
      break;
    }
  }

  return yosTable[applicableBracket] || 0;
}

// Check if pay grade is enlisted, warrant, or officer
export function getPayGradeType(payGrade: PayGrade): 'enlisted' | 'warrant' | 'officer' {
  if (payGrade.startsWith('E-')) return 'enlisted';
  if (payGrade.startsWith('W-')) return 'warrant';
  return 'officer';
}

// Get BAS rate based on pay grade
export function getBASRate(payGrade: PayGrade): number {
  const type = getPayGradeType(payGrade);
  return type === 'enlisted' ? BAS_RATES_2024.enlisted : BAS_RATES_2024.officer;
}
